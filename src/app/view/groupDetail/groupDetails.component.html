<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Group Details</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <main>
      <button routerLink="/show-groups">All Groups</button>
      <section>
        <!-- Group Info -->
        <h3>Group Name: {{ groupDetail?.group_name }}</h3>
        <div>Category: {{ groupDetail?.category }}</div>
        <div>Description: {{ groupDetail?.description }}</div>

        <!-- Current User Balance -->
        <div
          class="alert mt-3"
          [ngClass]="{
            'alert-success': balances[currentUserId] > 0,
            'alert-danger': balances[currentUserId] < 0,
            'alert-secondary': balances[currentUserId] === 0
          }"
        >
          <strong>Your Balance: </strong>
          <span *ngIf="balances[currentUserId] > 0">
            You should receive {{ balances[currentUserId] }}
          </span>
          <span *ngIf="balances[currentUserId] < 0">
            You owe {{ balances[currentUserId] | number : "1.2-2" | slice : 1 }}
          </span>
          <span *ngIf="balances[currentUserId] === 0">
            You are settled up
          </span>
        </div>

        <!-- Member Summary -->
        <div class="card member-card mt-4">
          <div class="card-header">Member Summary</div>
          <ul class="list-group list-group-flush">
            <li
              *ngFor="let member of otherMembers"
              class="list-group-item d-flex justify-content-between"
            >
              <span>{{ member.name }}</span>
              <span
                class="amount"
                [ngClass]="{
                  positive: balances[member.user_id!] > 0,
                  negative: balances[member.user_id!] < 0
                }"
              >
                {{ balances[member.user_id!] || 0 }}
              </span>
            </li>
          </ul>
        </div>

        <!-- Action Buttons -->
        <div class="button mt-4">
          <button
            type="button"
            class="btn btn-outline-warning"
            routerLink="/group/parent-group-details/addExpense"
          >
            Add Expense
          </button>

          <!-- from groupDetails.component.html -->
          <button
            type="button"
            class="btn btn-dark"
            routerLink="/group/parent-group-details/addUsers"
          >
            <!-- [queryParams]="{ groupId: groupDetail?.group_id }" -->
            Add Members
          </button>
          <button type="button" class="btn btn-dark" *ngIf="enableDelete">
            Delete Group
          </button>
        </div>
      </section>
    </main>
  </body>
</html>
